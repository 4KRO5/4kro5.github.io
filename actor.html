<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actor</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue@3"></script>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/0d70ca7b60.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="style/actor.css">

</head>
<style>
    @media (min-width: 768px) and (max-width: 1010px) {
        #image-actor {
            transform: translateY(40px);
            width: 215px;
        }
    }

    @media (min-width: 907px) and (max-width: 1010px) {
        #image-actor {
            transform: translateY(40px);
            width: 215px;
        }
    }

    @media (min-width: 1010px) and (max-width: 1319px) {
        #image-actor {
            transform: translateY(45px);
            width: 230px;
        }
    }

    @media (min-width: 1319px) and (max-width: 1519px) {
        #image-actor {
            transform: translateY(50px);
            width: 235px;
        }
    }

    @media (min-width: 1519px) and (max-width: 1900px) {
        #image-actor {
            transform: translateY(35px);
            width: 255px;
        }
    }
</style>

<body>
    <div id="app">
        <nav class="navbar navbar-expand-lg" style=" color:#ffff; background-color: #202DBC;;">
            <div class="container-fluid">
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              </button>
              <div class="collapse navbar-collapse">
                
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item mt-2 ms-3">
                    <h5 style="padding-top: 5px;">
                        {{username}}
                    </h5>
                  </li>
                  <li class="nav-item mt-2 ms-3">
                    <h5>
                        <a class="nav-link active text-light" aria-current="page" href="index.html">Home</a>
                      </h5>
                  </li>
                </ul>
                
                <form class="d-flex ms-4">
                  <a class="btn btn-primary" @click="logout">
                    <i class="fas fa-door-open"></i>
                    Log Out
                </a>
                </form>
              </div>
            </div>
          </nav>

        <div class="container-fluid">
            <div class="row align-items-start" style="background:#202DBC; padding: 20px; height: 50vh;">
                <!-- image actor -->
                <div class="col-3 ">
                    <div style="display: flex;  justify-content: center;">
                        <img v-if="actor.profile_path==null" width="300" src="media/no-image.png">
                        <img id="image-actor" v-else
                            :src="'https://www.themoviedb.org/t/p/w300_and_h450_bestv2'+actor.profile_path">
                    </div>


                </div>

                <div class="col-9 text-light">
                    <h1 class="display-5" style="padding-top: 30px;">
                        {{actor.name}}
                    </h1>

                    <div style="height: min-content;">
                        <p style="margin-top: 20px;">
                            {{actor.biography}}
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="container-fluid" style="padding: 30px;">
            <div class="row" style="margin-top: 30px;">
                <div class="col-3" style="padding: 40px;" >
                   <div style="padding: 20px; border-width: 2px; border-style: solid; border-color: rgb(46, 25, 170); border-radius: 10px;">
                    <div style="display: flex;  justify-content: center;">

                        <img src="media/icons8-instagram-48.png" alt="">
                        <img src="media/icons8-twitterx-50.png" alt="">
                        <img src="media/icons8-facebook-nuevo-50.png" alt="">
                    </div>
                    <div>
                        <h1 style="text-align: center; color: #202DBC;">Informacion personal</h1>
                        <div style="padding-left: 35px;">
                            <div v-if="actor.known_for_department!=null">
                                <strong class="text-blue">Conocido por</strong>
                                <p>
                                    {{actor.known_for_department}}
                                </p>
                            </div>
                            <div v-if="actor.popularity!=null">
                                <strong class="text-blue">Popularidad</strong>
                                <p>
                                    {{actor.popularity}}
                                </p>
                            </div>
                            <div v-if="actor.gender!=null">
                                <strong class="text-blue">Genero</strong>
                                <p v-if="actor.gender==1">Female</p>
                                <p v-else>Male</p>
                            </div>
                            <div v-if="actor.birthday!=null">
                                <strong class="text-blue">Cumpleaños</strong>
                                <p>
                                    {{actor.birthday}}
                                </p>
                            </div>
                            <div v-if="actor.place_of_birth!=null">
                                <strong class="text-blue">Lugar de nacimiento</strong>
                                <p>
                                    {{actor.place_of_birth}}
                                </p>
                            </div>
                            <div v-if="actor.deathday!=null">
                                <strong class="text-blue">Día de la muerte</strong>
                                <div>
                                    {{actor.deathday}}
                                </div>
                            </div>
                            <div v-if="alsoKnownAs.length>0">
                                <strong class="text-blue">Tambien conocido como</strong>
                                <p v-for="nowAs in actor.also_known_as">{{nowAs}}</p>
                            </div>
                   </div>
                    
                        
                        </div>



                    </div>
                </div>
                <div class="col-9">
                    <h2 class="text-blue" style="padding-left: 5px;">Conocido por</h2>
                    <div style="display: flex;">
                        <div v-for="index in 5" style="width: 18rem; border-radius: 25px; padding-right: 15px;">
                            <div v-if="creditsCast[index-1]!=null">
                                <a :href="`detailMovie.html?id=${creditsCast[index-1].id}`">
                                    <img v-if="creditsCast[index-1].poster_path==null" src="media/no-image.png"
                                        class="card-img-top" alt="...">
                                    <img style="border-radius: 25px; " v-else width="175" class="card-img-bottom"
                                        :src="'https://www.themoviedb.org/t/p/w150_and_h225_bestv2'+creditsCast[index-1].poster_path">
                                </a>
                                <div style="padding: 10px;">
                                    <p v-if="creditsCast[index-1].title!=null" class="fw-bold">
                                        {{creditsCast[index-1].title}}
                                    </p>
                                    <p>
                                        {{creditsCast[index-1].original_name}}
                                    </p>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div>
                        <h3 class="text-light" style="background-color: #202DBC; padding: 30px; border-radius: 20px;">Filmography</h3>
                        <div v-for="cast_result in creditsCast" >
                            <div v-if="cast_result.media_type=='movie'">
                                <div v-if="cast_result.media_type=='movie'">
                                    <p>
                                        <span class="badge text-blue bg-gris-4 ms-2">
                                            MOVIE
                                        </span>
                                        <span v-if="cast_result.title!=null">
                                            <a :href="`detailMovie.html?id=${cast_result.id}`" class="text-blue">
                                                <strong>{{cast_result.title}}</strong>
                                            </a>
                                        </span>
                                        <span v-else>
                                            N/A
                                        </span>
                                        
                                        <span v-if="cast_result.character!=null && cast_result.character!=''">
                                            as {{cast_result.character}}
                                        </span>
    
                                        <span v-if="cast_result.release_date!=null && cast_result.release_date!=''">
                                            ({{cast_result.release_date}})
                                        </span>
                                        <span v-else>
                                            (N/A)
                                        </span>
                                        
                                    </p>
                                </div>
                            </div>
                            <div v-else>
                                <p>
                                    <span class="badge text-blue bg-gris-4 ms-2">
                                        TV
                                    </span>
                                    <span v-if="cast_result.name!=null">
                                        <a :href="`detailTV.html?id=${cast_result.id}`" class="text-blue">
                                            <strong>{{cast_result.name}}</strong>
                                        </a>
                                    </span>
                                    <span v-else>
                                        N/A
                                    </span>
                                    
                                    <span v-if="cast_result.character!=null && cast_result.character!=''">
                                        as {{cast_result.character}}
                                    </span>
    
                                    <span v-if="cast_result.first_air_date!=null && cast_result.first_air_date!=''">
                                         ({{cast_result.first_air_date}})
                                    </span>
                                    <span v-else>
                                         (N/A)
                                    </span>
                                </p>
                            </div>
                           
                        </div>
                    </div>
                   
                </div>
            </div>


        </div>
        <script type="text/javascript">
            const { createApp } = Vue;

            var app = createApp({
                data() {
                    return {
                        username: localStorage.getItem('username'),
                        actor: '',
                        creditsCast: [],
                        alsoKnownAs: [],
                        typeMovie: false,
                        typeTv: false,



                    }
                },
                methods: {
                    logout() {
                        localStorage.removeItem('username');
                        window.location = "login.html"
                    },
                    tipoPeli(){
                    typeMovie = true
                    typeTv = false
                },
                tipoTv(){
                    typeTv = true
                    typeMovie = false
                },
                getSlug(title){
                    return title.replaceAll(' ','-')
                },
                },
                mounted() {
                    if (!localStorage.username) {
                        location.href = "login.html";
                    }
                    var queryString = window.location.search;
                    var urlParams = new URLSearchParams(queryString);
                    var personId = urlParams.get('id')

                    // Información del actor
                    var config = {
                        method: 'get',
                        url: 'https://api.themoviedb.org/3/person/' + personId,
                        headers: {
                            accept: 'application/json',
                            Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzN2IxMDAyZjFjYmY3N2JkMTg1ZDg3NDkyMmFlZWU3MCIsInN1YiI6IjY1MTRiNzhlYmRkNTY4MDEzZjU4MzBjOSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.OX11ObYS13YEQravRhAAKDfzpifakVGHdTnmxJ3rEeo'
                        }
                    };

                    axios(config)
                        .then(function (response) {
                            app.actor = response.data;
                            app.alsoKnownAs = response.data.also_known_as;

                            console.log(JSON.stringify(response.data));
                        })
                        .catch(function (error) {
                            console.log(error);
                        });
                    //Información del cast del actor
                    var config = {
                        method: 'get',
                        url: 'https://api.themoviedb.org/3/person/' + personId + '/combined_credits?language=en-US',
                        headers: {
                            'Authorization': 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzN2IxMDAyZjFjYmY3N2JkMTg1ZDg3NDkyMmFlZWU3MCIsInN1YiI6IjY1MTRiNzhlYmRkNTY4MDEzZjU4MzBjOSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.OX11ObYS13YEQravRhAAKDfzpifakVGHdTnmxJ3rEeo'
                        }
                    };

                    axios(config)
                        .then(function (response) {
                            app.creditsCast = response.data.cast
                            console.log(app.credits);
                        })
                        .catch(function (error) {
                            console.log(error);
                        });
                        
                        

                }
                

                // 
                

            }).mount('#app')
        </script>
</body>

</html>